<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John Feedback</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/lux/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark">
    <div class="d-flex justify-content-center align-items-center mt-3 vh-50">
        <form class="card col-12 col-md-5 col-lg-4" id="frmHomePage">
            <div class="card-body">
                <h1 class="text-center mb-0 text-primary">John Feedback</h1>
                <h3 class="text-center mb-4"></h3>
                <p>John Feedback is a tool that allows students to give public feedback to their groupmates while also being able to send anonymous feedback to instructors.</p>
                <button class="btn btn-primary col-12 mt-2 form-control" type="button" id="btnSignIn">Sign in</button>
            </div>
        </form>
        

        <form class="card col-12 col-md-5 col-lg-4" id="frmLogin" style="display: none;">
            <div class="card-body">
                <h1 class="text-center mb-0 text-primary">SwollenHippo</h1>
                <h3 class="text-center mb-4">Administrator Login</h3>
                <input id="txtUsername" class="form-control" type="email" placeholder="johndoe@email.com" aria-label="email">
                <input id="txtPassword" class="form-control mt-2" type="password" placeholder="password" aria-label="password">
                <hr />
                <button class="btn btn-primary col-12 mt-2" type="button" id="btnLogin">Log In</button>
                <button class="btn btn-primary col-12 mt-2" type="button" id="btnHomeBack">Go back</button>

                <button class="btn btn-link col-12 mt-0" type="button" id="btnSwapLogin">Need an account, register here</button>
            </div>
        </form>
        

        <form class="card col-12 col-md-5 col-lg-4 mt-4" id="frmRegister" style="display: none;">
            <div class="card-body">
                <h2 class="text-center mb-0 text-primary">Registration</h2>
                <h5 class="text-center">Enter your information Below:</h5>
                
                <h6 class="text-left mt-4">Account Details:</h6>
                <input class="form-control mt-2" type="Firstname" id="txtFirstName" placeholder="first name" aria-label="first name">
                <input class="form-control mt-2" type="Lastname" id="txtLastName" placeholder="last name" aria-label="last name">
                
                <h6 class="text-left">Login Information:</h6>
                <input class="form-control mt-2" type="email" id="txtEmail" placeholder="jdoe@email.com" aria-label="email" required>
                <input class="form-control mt-2" type="password" id="txtRegisterPassword" placeholder="password" aria-label="password">
                <input class="form-control mt-2" type="password" id="txtPasswordConfirm" placeholder="password confirm" aria-label="password confirm">

                <h6 class="text-left mt-4">Contact Information:</h6>
                <input class="form-control mt-2" type="PhoneNumber" id="txtPhoneNumber" placeholder="phone number" aria-label="phone number">
                <input class="form-control mt-2" type="Discord" id="txtDiscord" placeholder="discord username" aria-label="discord">
                <input class="form-control mt-2" type="Teams" id="txtTeams" placeholder="Teams " aria-label="Teams contact">
                <button class="btn btn-primary col-12 mt-4" type="button" id="registerbtn" aria-label="Register button">Register</button>
                <button class="btn btn-link col-12 mt-0" type="button" id="btnReturn">Go back</button>
                
            </div>
        </form>

        <form class="card col-12 col-md-5 col-lg-4" id="frmFeedback" style="display: none;">
            <div class="card-body">
                <h2 class="text-center mb-4">Project Feedback</h2>
                <h5 class="text-left mb-3" style="font-size: 16px;">Public Feedback:</h5>
                <textarea class="form-control" id="txtPublicFeedback" type="feedback" rows="4" cols="50" placeholder="Group members will see your feedback but it will be anonymous" aria-label="Public feedback input"></textarea>
    
                <h5 class="text-left mt-3 mb-3" style="font-size: 16px;">Private Feedback:</h5>
                <textarea class="form-control" id="txtPrivateFeedback" type="feedback" rows="4" cols="50" placeholder="Only your instructor will see this feedback" aria-label="Private feedback input"></textarea>
    
                <button class="btn btn-primary col-12 mt-4" type="button" id="registerbtn" aria-label="Register button">Submit</button>
            </div>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        //login event and validation
        
        document.querySelector("#btnLogin").addEventListener("click",(e) => {
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strUsername = document.querySelector("#txtUsername").value
            const strPassword = $('#txtPassword').val()
            strUsername = strUsername.toLowerCase()
            let blnError = false
            let strMessage = ''

            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage += '<p  class="mb-0 mt-0">Username must be an email address</p>'
            }
            
            if(strPassword.length < 1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Password Cannot Be Blank</p>'
            }
            
            if(blnError){
                Swal.fire({
                    title: "Oh no, you have an error!",
                    html: strMessage,
                    icon: "error"
                })
            }
        })
        //registration validation
        document.querySelector("#registerbtn").addEventListener("click",(e) => {
            const regEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/
            let strUsername = document.querySelector("#txtEmail").value
            const strRegisterPassword = $('#txtRegisterPassword').val()
            const strPasswordConfirm = $('#txtPasswordConfirm').val()
            const strFirstName = $('#txtFirstName').val()
            const strLastName = $('#txtLastName').val()

            strUsername = strUsername.toLowerCase()
            let blnError = false
            let strMessage = ''
            
            if(!regEmail.test(strUsername)){
                blnError = true
                strMessage += '<p  class="mb-0 mt-0">Username must be an email address.</p>'
            }
            
            if(strRegisterPassword.length < 1 || strUsername.length < 1 || strPasswordConfirm.length < 1 || strFirstName.length <1 || strMiddleName.length<1 || strLastName.length <1 || strAddress1.length <1 || strAddress2.length <1 || strCity.length<1 ||strState.length <1 || strZip.length <1){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Please fill out each field.</p>'
            }

            if(strRegisterPassword != strPasswordConfirm){
                blnError = true
                strMessage += '<p class="mb-0 mt-0">Passwords must match. passwordconfirm:</p>' +strPasswordConfirm
                strMessage += '<p class="mb-0 mt-0">Passwords must match. password:</p>' +strPassword 


            }
            if(blnError){
                Swal.fire({
                    title: "Oh no, something went wrong!",
                    html: strMessage,
                    icon: "error"
                })
            }else{
                strMessage += '<p class="mb-0 mt-0">Account Registered</p>' 
                Swal.fire({
                    title: "Registration Successful",
                    html: strMessage,
                    icon: "success"
                })
            }
        })


        //register swap
        $('#btnSwapLogin').on('click',function(){
            $('#frmLogin').slideUp('slow')
            $('#frmRegister').slideDown('fast')
        })
      //back button on registeration page
      $('#btnReturn').on('click',function(){
            $('#frmRegister').slideUp('slow')
            $('#frmLogin').slideDown('fast')
        })

        //login to feedback
        $('#btnLogin').on('click',function(){
            $('#frmLogin').slideUp('slow')
            $('#frmFeedback').slideDown('fast')
        })

        //home page sign in Btn
        $('#btnSignIn').on('click',function(){
            $('#frmHomePage').slideUp('slow')
            $('#frmLogin').slideDown('fast')
        })
        //login page back btn
        $('#btnHomeBack').on('click',function(){
            $('#frmLogin').slideUp('slow')
            $('#frmHomePage').slideDown('fast')
        })
    </script>
</body>
</html>